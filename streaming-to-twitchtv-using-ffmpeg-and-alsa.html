<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Streaming to Twitch.tv using ffmpeg and ALSA</title>
    <link rel="icon" href="https://sulami.github.io/favicon.ico" />
    <link rel="stylesheet" href="https://sulami.github.io/theme/css/main.css" />
    <link href="https://sulami.github.io/feed/rss.xml" type="application/rss+xml" rel="alternate" title="/dev/sulami >> blog RSS Feed" />

    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body id="index" class="home">
    <header id="banner" class="body">
        <nav>
          <div id="menu">
            <a href="https://sulami.github.io/">/dev/sulami >> blog</a> |
            <a href="https://sulami.github.io/feed/rss.xml">RSS</a>
          </div>
        </nav>
    </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        >>
        <a href="https://sulami.github.io/streaming-to-twitchtv-using-ffmpeg-and-alsa.html" rel="bookmark"
           title="Permalink to Streaming to Twitch.tv using ffmpeg and ALSA">Streaming to Twitch.tv using ffmpeg and <span class="caps">ALSA</span></a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
    <span class="date">2013-05-14</span>
    <!-- | -->
    <!-- in <a href="https://sulami.github.io/category/misc.html">misc</a> -->
</footer><!-- /.post-info -->
      <p>Well, as I lost my database, I could not recover this article, but I
still got my script, so here you&nbsp;go:</p>
<div class="codehilite"><pre><span></span>INRES=&quot;1920x1080&quot;
OUTRES=&quot;1920x1080&quot;
FPS=&quot;30&quot;
QUAL=&quot;medium&quot;
STREAM_KEY=&quot;live_123_xxx&quot;

ffmpeg
-f x11grab
-s &quot;$INRES&quot;
-r &quot;$FPS&quot;
-i :0.0+0,0
-itsoffset -00:00:01
-f alsa
-i hw:3,0
-f alsa
-i hw:0,0
-filter_complex amix=inputs=2:duration=first:dropout_transition=3
-af aresample
-vcodec libx264
-preset &quot;$QUAL&quot;
-s &quot;$OUTRES&quot;
-acodec libmp3lame
-ar 44100
-threads 6
-b:a 512k
-pix_fmt yuv420p
-f flv &quot;rtmp://live.justin.tv/app/$STREAM_KEY&quot;
</pre></div>


<p>You get your stream key <a href="http://www.twitch.tv/broadcast" title="Twitch">here</a>. Adjust resolutions as needed (input
and output), aswell as <span class="caps">FPS</span>. In lines 13-16 you can change your audio
devices (speakers and microphone, get them from &#8220;<em>arecord -l&#8221;Â </em>for
microphones and<em>&#8220;aplay -l&#8221;</em>for speakers). Adjust threads to the amount
of <span class="caps">CPU</span> cores you want to use to&nbsp;encode.</p>
    </div><!-- /.entry-content -->
  </article>
</section>
</body>
</html>
